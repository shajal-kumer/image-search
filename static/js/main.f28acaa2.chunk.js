(this["webpackJsonpimage-search2-with-hook-and-context"]=this["webpackJsonpimage-search2-with-hook-and-context"]||[]).push([[0],{21:function(e,a,t){e.exports=t(34)},33:function(e,a,t){},34:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(14),o=t.n(r),c=t(9),i=t.n(c),s=t(15),m=t(16),u=t(17),d=t(20),g=t(19),h="16545790-0e8100c6b2ac3c626b69e46b4",v=Object(n.createContext)(),p=function(e){Object(d.a)(t,e);var a=Object(g.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=a.call.apply(a,[this].concat(l))).state={images:[],error:null,visible:9,loadMore:!1},e.handleGetRequest=function(){var a=Object(s.a)(i.a.mark((function a(t){var n,l,r,o;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),n=t.target.elements.searchValue.value,l="https://pixabay.com/api/?key=".concat(h,"&q=").concat(n,"&image_type=photo&per_page=200"),a.next=5,fetch(l);case 5:return r=a.sent,a.next=8,r.json();case 8:o=a.sent,n?(e.setState({images:o.hits,error:null,loadMore:!0,visible:9}),localStorage.setItem("visible",9)):e.setState({error:"Please provide a value"});case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleImageLoad=function(a){var t=e.state,n=t.visible,l=t.images;n+=9,e.setState({visible:n}),n>=l.length&&e.setState({loadMore:!1}),localStorage.setItem("visible",n)},e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("images")),a=localStorage.getItem("visible")?parseInt(localStorage.getItem("visible")):9;if(null===e||0===e.length)this.setState({images:[],loadMore:!1,visible:9});else{var t=!0;a>=e.length&&(t=!1),this.setState({images:e,loadMore:t,visible:a})}}},{key:"componentDidUpdate",value:function(){localStorage.setItem("images",JSON.stringify(this.state.images))}},{key:"render",value:function(){var e=this.state,a=e.images,t=e.error,n=e.visible,r=e.loadMore;return l.a.createElement(v.Provider,{value:{images:a,error:t,handleGetRequest:this.handleGetRequest,visible:n,handleImageLoad:this.handleImageLoad,loadMore:r}},this.props.children)}}]),t}(n.Component),E=t(6),b=function(){var e=Object(n.useContext)(v).handleGetRequest;return l.a.createElement("div",{className:"imageSearch"},l.a.createElement("form",{className:"imageSearch__form",onSubmit:e},l.a.createElement("input",{type:"text",autoComplete:"off",name:"searchValue",placeholder:"Search for images..."}),l.a.createElement("button",null,"Search")))},f=function(){var e=Object(n.useContext)(v),a=e.loadMore,t=e.handleImageLoad;return l.a.createElement("button",{className:"load-more",style:{display:a?"inline-block":"none"},onClick:t},"Load More")},w=function(e){var a=Object(n.useContext)(v),t=a.images,r=a.visible;return l.a.createElement(n.Fragment,null,l.a.createElement(b,null),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},t.slice(0,r).map((function(e){return l.a.createElement("div",{key:e.id,className:"col-md-4",style:{marginBottom:"2rem"}},l.a.createElement("div",{className:"imageList__container"},l.a.createElement("img",{className:"imageList__image",src:e.largeImageURL,alt:e.tags})),l.a.createElement("div",{className:"image__details"},l.a.createElement("button",null,l.a.createElement(E.b,{to:{pathname:"/images/".concat(e.id),state:{image:e}}}," ","View"," "))))})))),l.a.createElement(f,null))},N=t(1),_=function(e){"undefined"===typeof e.location.state&&(window.location="/not-found");var a=e.location.state.image,t=a.largeImageURL,n=a.tags,r=a.user,o=a.pageURL;return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-12"},l.a.createElement("div",{className:"imageView__container"},l.a.createElement("img",{className:"imageView__img img-responsive",src:t,alt:n}),l.a.createElement("div",{className:"imageView__copyright"},l.a.createElement("p",null,"\xa9pixabay")),l.a.createElement("div",{className:"imageView__text"},l.a.createElement("h4",null,"Credit: ",l.a.createElement("span",null,r)),l.a.createElement("h4",null,"Download:"," ",l.a.createElement("span",null,l.a.createElement("a",{target:"_blank",href:o},"Go To Download"))),l.a.createElement("button",{className:"active-recipe__button"},l.a.createElement(E.b,{to:"/"}," Home")))))))},y=function(e){return l.a.createElement("div",null,l.a.createElement("h1",null," Not Found"))};var S=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(p,null,l.a.createElement(N.d,null,l.a.createElement(N.b,{path:"/images/:id",component:_}),l.a.createElement(N.b,{path:"/not-found",component:y}),l.a.createElement(N.b,{exact:!0,path:"/",component:w}),l.a.createElement(N.a,{to:"/not-found"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(32),t(33);o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(E.a,null,l.a.createElement(S,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.f28acaa2.chunk.js.map